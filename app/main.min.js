var BouncingBall=function(){function m(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function n(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;6>c;c++)b+=a[Math.floor(16*Math.random())];return b}var a,b=.8,c=10,d=10,e=15,f=$("#myCanvas").width(),g=$("#myCanvas").height(),h=.005,i=[],j=[-1e3,1e3],k=function(a,h){function p(a,b){var d=[i[0]+k[0]*a+.5*l[0]*a*a,i[1]+k[1]*a+.5*l[1]*a*a],e=[b[0]/(c*a),b[1]/(c*a)];i=d,k=[k[0]+.5*(l[0]+e[0])*a,k[1]+.5*(l[1]+e[1])*a],l=e}function q(){i[0]<=e&&(i[0]=e,k[0]*=-b,k[1]*=b),i[0]>=f-e&&(i[0]=f-e,k[0]*=-b,k[1]*=b),i[1]<=e&&(i[1]=e,k[0]*=b,k[1]*=-b),i[1]>g-e&&(i[1]=g-e,k[0]*=b,k[1]*=-b)}function r(a){for(var b=[0,0],c=[],d=o.length,e=0;d>e;e++){var f=o[e];f[2]!==!1&&(f[2]-=a),b[0]+=f[0],b[1]+=f[1],f[2]<0||c.push(f)}return o=c,b}function s(){return i}function t(a){o.push(a)}var i=[a,h],k=[0,0],l=[0,0],m=n(),o=[[0,d*c,!1]];return{addForce:t,doCollisionDetection:q,doForces:r,move:p,getCoords:s,color:m}},l=function(){function b(){var a=d();a.clearRect(0,0,f,g),a.save();for(var b=i.length,c=0;b>c;c++){var h=i[c];a.beginPath(),a.arc(h.getCoords()[0],h.getCoords()[1],e,0,2*Math.PI,!0),a.closePath(),a.fillStyle=h.color,a.fill(),a.restore()}}function c(){var c=(new Date).getTime(),d=c-a;d/=1e3,h>d&&(d=h),a=c;for(var e=i.length,f=0;e>f;f++){var g=i[f],j=g.doForces(d);g.move(d,j),g.doCollisionDetection()}b()}function d(){var a=$("#myCanvas")[0];return a.getContext("2d")}function j(){a=(new Date).getTime(),setInterval(c,1e3*h)}var a=0;return{init:j}};$(document).ready(function(){$("#myCanvas").click(function(b){0===i.length&&(a=new l,a.init());var c=b.pageX-$("#myCanvas").offset().left,d=b.pageY-$("#myCanvas").offset().top,e=new k(c,d);e.addForce([m(j[0],j[1]),m(j[0],j[1]),.1]),i.push(e)})})}();